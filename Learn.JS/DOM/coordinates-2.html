<!DOCTYPE HTML>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <style>
        body {
            height: 2000px;
        }

        .note {
            /* position: fixed; */
            position: absolute;
            z-index: 1000;
            padding: 5px;
            border: 1px solid black;
            background: white;
            text-align: center;
            font: italic 14px serif;
        }

        blockquote {
            background: #5f5959;
            border-left: 10px solid #ccc;
            margin: 0 0 0 100px;
            padding: .5em 10px;
            quotes: "\201C" "\201D" "\2018" "\2019";
            display: inline-block;
            white-space: pre;
        }

        blockquote:before {
            color: #ccc;
            content: open-quote;
            font-size: 4em;
            line-height: .1em;
            margin-right: .25em;
            vertical-align: -.4em;
        }
    </style>
</head>

<body>
    <!-- <body style="height: 2000px"> -->

    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Reprehenderit sint atque dolorum fuga ad incidunt
        voluptatum error fugiat animi amet! Odio temporibus nulla id unde quaerat dignissimos enim nisi rem provident
        molestias sit tempore omnis recusandae
        esse sequi officia sapiente.</p>

    <blockquote>
        Teacher: Why are you late?
        Student: There was a man who lost a hundred dollar bill.
        Teacher: That's nice. Were you helping him look for it?
        Student: No. I was standing on it.
    </blockquote>

    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Reprehenderit sint atque dolorum fuga ad incidunt
        voluptatum error fugiat animi amet! Odio temporibus nulla id unde quaerat dignissimos enim nisi rem provident
        molestias sit tempore omnis recusandae
        esse sequi officia sapiente.</p>

    <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Reiciendis animi laborum vel omnis iure maxime ratione,
        quidem accusantium. Officiis impedit maxime ex vero nesciunt fugit atque repudiandae qui quibusdam? Animi
        aliquid modi illo harum delectus quia et quae, porro obcaecati. Nobis excepturi aspernatur officiis, architecto,
        eveniet quis maxime velit amet adipisci magni accusantium dolorum tempore corporis laudantium ab nam voluptatem!
        Doloribus nostrum dolorem illum maiores illo consectetur similique aliquam deserunt itaque at quos,
        voluptatibus, facilis esse natus. Vel unde repellat amet recusandae quas. Debitis, natus et fuga vero voluptates
        officiis voluptas inventore neque deleniti! Incidunt dolor fugiat exercitationem amet, minus, quia, cupiditate
        nisi accusamus mollitia illum ipsa. Blanditiis laborum, et necessitatibus eos sequi dolor fugit amet consequatur
        soluta, id corporis veritatis esse incidunt adipisci, non obcaecati repellat voluptas laudantium! Ab voluptate
        quae debitis adipisci reprehenderit impedit magnam accusantium veritatis voluptas. Tempora inventore doloribus
        distinctio nemo animi impedit vero deleniti debitis, excepturi ipsa quis veniam veritatis molestiae, ullam quas
        dicta id ad. Officia ut error eaque vero velit aliquam quo ex deserunt fugit ad amet nostrum repellat
        consequuntur iure commodi itaque iusto enim, modi minima, ducimus dolor cumque assumenda unde. Repellat magni,
        excepturi hic, itaque explicabo fuga soluta blanditiis impedit accusantium et ipsam magnam ducimus fugit! Eaque
        sunt excepturi maxime odio facilis deleniti aut accusamus, labore esse porro quasi corrupti ducimus harum nemo
        necessitatibus perferendis quas optio? Deleniti eveniet officia doloribus, quae odit officiis optio facere
        doloremque, maiores illo, ratione quibusdam placeat. Aliquid cumque, possimus fugit minima error nihil
        asperiores repellendus exercitationem aliquam autem est earum tempora, quisquam praesentium voluptatum. Iure
        voluptatem, voluptas veniam reprehenderit quae numquam itaque? Temporibus magnam, voluptatem omnis assumenda
        architecto ipsam beatae incidunt dolor, facilis facere error amet inventore dignissimos? Beatae alias, tenetur
        quasi explicabo sit nostrum illo sapiente! Exercitationem numquam illo quo mollitia alias dolore. Cumque
        architecto iste illum aspernatur, id pariatur tempore dolorem, perspiciatis amet et ipsa sit. Similique id
        distinctio quisquam? Aut dolorem quod repudiandae? Assumenda placeat consequatur commodi corrupti praesentium
        minima laborum molestias, eius deserunt ipsam odit doloribus quibusdam ad quidem laboriosam! Unde, asperiores
        debitis similique consequuntur atque dolore fugit. Quaerat, natus deleniti nam voluptate maxime doloremque
        adipisci quibusdam fugit ut similique consequuntur quas asperiores corrupti, quisquam, soluta magnam autem enim
        ex quidem! Aspernatur iure optio qui voluptas illum ex ullam obcaecati nam pariatur, laudantium animi culpa
        molestias, voluptates velit reiciendis, maxime eum. Pariatur nisi mollitia esse eos atque recusandae corporis
        rerum, nemo architecto accusantium, dolorem non nihil explicabo repellat aliquam laudantium quae consequuntur ea
        earum. Ea eos alias at, quam laborum rem! Veniam maxime eos veritatis vitae odio debitis modi fugit, ratione
        excepturi praesentium voluptatibus sit sint nobis? Alias dolorum sapiente maiores quam quibusdam porro
        distinctio veritatis dolor velit cumque rem, earum aliquid atque repellat nihil accusantium suscipit neque
        voluptatem quas, hic possimus assumenda, voluptates culpa magni. Est vel exercitationem cupiditate similique
        quos repellat, ratione aliquid odio accusamus, quidem non pariatur facilis officia. Quas possimus pariatur
        aliquid dolorum, excepturi alias in harum neque eligendi nesciunt sed adipisci dicta cum, voluptate nam labore?
        Commodi saepe minima enim aliquam fuga. Quis, doloribus, vitae cum quae alias voluptas eos rem accusantium ex
        explicabo culpa dicta, veritatis blanditiis expedita sint amet quibusdam! Itaque minus, quibusdam sint neque
        eius ipsa quo recusandae ipsam quam voluptatibus nostrum vero, eum doloremque explicabo provident beatae illo
        placeat porro accusantium eveniet inventore quidem, omnis dicta asperiores? Excepturi, consequatur. Mollitia
        nemo, accusantium nulla aliquid repudiandae nihil impedit laudantium molestiae, officiis sit vitae pariatur quia
        natus. Mollitia molestias rerum optio, animi at voluptates, consequatur autem ipsum officia tempora illo sint
        culpa cumque possimus nobis reprehenderit magni, aliquam hic amet vel? Quibusdam, aperiam maxime! Magni,
        facilis. Odit quis, quibusdam officiis illo, earum autem dignissimos recusandae hic provident omnis fuga impedit
        iste rerum molestiae qui eligendi nobis minima cumque. Hic tenetur repudiandae id asperiores quibusdam numquam
        totam temporibus placeat voluptatum nulla deserunt doloremque laboriosam, illum, minima accusamus, alias dolores
        soluta ea nihil quia ipsum autem maxime? Odit totam dolorem reprehenderit doloremque id deleniti accusamus
        aliquid et nisi sequi amet necessitatibus perspiciatis, possimus reiciendis libero, dolor mollitia facere
        provident sunt. Quas magni nam at qui tempore cumque rerum molestiae, animi voluptates ratione explicabo vel
        porro fugiat alias eligendi unde possimus, quam a nisi? Nemo officiis voluptatem veniam consequuntur vitae non,
        blanditiis exercitationem quibusdam aliquam architecto fugiat. Amet, blanditiis doloribus! Sit eos a deserunt
        eveniet rem modi corrupti asperiores, natus maiores quas placeat amet harum, et iusto voluptas quos facilis
        rerum? Ut molestias mollitia aliquid commodi quibusdam rem eaque quisquam veritatis sint? Sunt, inventore esse.
        Voluptatibus nisi tempore, porro laborum dolorem deleniti? Similique, rerum omnis ad ducimus dicta consequatur
        eos porro, placeat optio pariatur accusantium amet aliquid distinctio! Nisi pariatur perspiciatis labore numquam
        harum qui aut earum animi, eligendi a velit aliquam culpa obcaecati necessitatibus, dolorum atque reprehenderit
        exercitationem, blanditiis accusantium nobis. Sint neque laboriosam voluptas ipsam pariatur vitae beatae
        perspiciatis modi, dolorum quidem nesciunt tempora nulla rem ex ipsa sunt ipsum molestiae obcaecati numquam!
        Fugit aspernatur laudantium reiciendis quae dolores, quas quo enim quis odio illo ab vel adipisci corrupti magni
        ad cupiditate deserunt? Ex, perferendis nemo facilis dolorem laudantium amet nostrum quo neque obcaecati
        doloremque aperiam autem pariatur! Facilis cupiditate voluptatem aspernatur itaque aliquam ipsam laborum ullam
        reiciendis! Optio voluptate tempore itaque laborum, hic in sed consequuntur enim fugit maxime possimus corrupti,
        consequatur architecto similique amet illum quibusdam? Blanditiis ratione repudiandae distinctio quaerat,
        consequatur rem et veritatis nihil ut molestiae adipisci quia corporis sunt, illo deserunt quae asperiores
        accusamus numquam? Laudantium porro mollitia eveniet rerum! Esse recusandae consequuntur alias. Ipsam aspernatur
        maiores dolores hic rerum facilis exercitationem quae, pariatur alias sint placeat quia repellendus consectetur
        beatae cupiditate quod sunt recusandae totam accusamus omnis molestiae ratione nemo tempora! Cupiditate itaque
        ipsum distinctio assumenda esse nesciunt sit quo corrupti, eos fugiat quis provident soluta in qui perspiciatis
        delectus aliquam voluptatem. At, ullam. Nulla, rerum et quisquam ad dolore distinctio necessitatibus tempora,
        voluptatem facere fuga expedita recusandae id nobis, error facilis illo similique laborum ipsam totam animi quod
        repudiandae rem. Maxime reiciendis quibusdam distinctio aut, labore itaque voluptatibus?</p>


    <script>
        /**
         * Позиционирует элемент elem относительно элемента anchor в соответствии со значением position.
         *
         * @param {Node} anchor     элемент, около которого позиционируется другой элемент
         * @param {string} position одно из: top/right/bottom
         * @param {Node} elem       элемент, который позиционируется
         *
         * Оба элемента elem и anchor должны присутствовать в документе
         */
        function getCoords(elem) {
            let box = elem.getBoundingClientRect();

            return {
                top: box.top + window.pageYOffset,
                right: box.right + window.pageXOffset,
                bottom: box.bottom + window.pageYOffset,
                left: box.left + window.pageXOffset
            };
        }
        function positionAt(anchor, position, elem) {
            // let anchorCoords = anchor.getBoundingClientRect();
            let anchorCoords = getCoords(anchor);


            switch (position) {
                case 'top-out':
                    elem.style.left = anchorCoords.left + "px";
                    elem.style.top = anchorCoords.top - elem.offsetHeight + "px";
                    break;
                case 'top-in':
                    elem.style.left = anchorCoords.left + "px";
                    elem.style.top = anchorCoords.top + "px";
                    break;
                case 'right-out':
                    elem.style.left = anchorCoords.right + "px";
                    elem.style.top = anchorCoords.top + anchor.offsetHeight / 2 - elem.offsetHeight / 2 + "px";
                    break;
                case 'right-in':
                    elem.style.left = anchorCoords.right - elem.offsetWidth + "px";
                    elem.style.top = anchorCoords.top + "px";
                    break;
                case 'bottom-out':
                    elem.style.left = anchorCoords.left + "px";
                    elem.style.top = anchorCoords.bottom + "px";
                    break;
                case 'bottom-in':
                    elem.style.left = anchorCoords.left + "px";
                    elem.style.top = anchorCoords.bottom - elem.offsetHeight + "px";
                    break;
            }


            // if (position == 'top-out') {
            //     elem.style.left = anchorCoords.left + "px";
            //     elem.style.top = anchorCoords.top - elem.offsetHeight + "px";
            // }
            // if (position == 'top-in') {
            //     elem.style.left = anchorCoords.left + "px";
            //     elem.style.top = anchorCoords.top + "px";
            // }
            // if (position == 'right-out') {
            //     elem.style.left = anchorCoords.right + "px";
            //     elem.style.top = anchorCoords.top + anchor.offsetHeight / 2 - elem.offsetHeight / 2 + "px";
            // }
            // if (position == 'right-in') {
            //     elem.style.left = anchorCoords.right - elem.offsetWidth + "px";
            //     elem.style.top = anchorCoords.top + "px";
            // }
            // if (position == 'bottom-out') {
            //     elem.style.left = anchorCoords.left + "px";
            //     elem.style.top = anchorCoords.bottom + "px";
            // }
            // if (position == 'bottom-in') {
            //     elem.style.left = anchorCoords.left + "px";
            //     elem.style.top = anchorCoords.bottom - elem.offsetHeight + "px";
            // }
        }

        /**
         * Показывает заметку с заданным содержимым на заданной позиции
         * относительно элемента anchor.
         */
        function showNote(anchor, position, html) {
            let note = document.createElement('div');
            note.className = "note";
            note.innerHTML = html;
            document.body.append(note);

            positionAt(anchor, position, note);
        }


        function showNote1(anchor, position, html) {
            let note = document.createElement('div');
            // note.className = 'note';
            note.classList.add('note')
            note.innerHTML = html;
            document.body.append(note)

            positionAt(anchor, position, note)
        }

        // test it
        let blockquote = document.querySelector('blockquote');

        showNote1(blockquote, "top-out", "note above");
        showNote1(blockquote, "top-in", "note above");
        showNote1(blockquote, "right-out", "note at the right");
        showNote1(blockquote, "right-in", "note at the right");
        showNote1(blockquote, "bottom-out", "note below");
        showNote1(blockquote, "bottom-in", "note below");
    </script>


</body>

</html>